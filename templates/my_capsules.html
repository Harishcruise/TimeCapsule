{% extends 'components/navBar.html' %}

{% block title %}My TimeCapsules{% endblock %}

{% block content %}
    <div class="my-capsules-content">
        <div>
            <h1>My Capsules</h1>
        </div>

        <!-- Create Capsule Button -->
        <div class="create-capsule-button">
            <div class="button-position">
                {% include 'components/buttons/button.html' with button_text="Create Capsule" button_class="primary-button" button_data_toggle='modal' button_data_target="#capsuleFormModal" %}
            </div>
        </div>

        <!-- Form Modal -->
        <div id="capsuleFormModal" class="modal">
            <div class="modal-left"></div>
            <div class="modal-right">
                <div class="modal-form">
                    <div class="modal-heading">
                        <h3>Create your Time Capsule!</h3>
                    </div>
                    <div class="modal-content">
                        <span class="close">
                         {% include 'components/buttons/button.html' with button_text="&times;" button_class="x-button" button_font_size="20px"%}
                        </span>
                        <form method="post" enctype="multipart/form-data" id="capsuleForm">
                            {% csrf_token %}
                            <div class="capsule-section">
                                {{ form.as_p }}
                            </div>
                            <div class="capsule-content-section">
                                <div id="dropZone" class="drop-zone">
                                    <p>Drag and drop files here, or click to select files</p>
                                    <input type="file" name="capsule_contents" id="capsule_contents" multiple hidden accept=".csv, .jpg, .png, .txt, .pdf" />
                                    <div id="fileList" class="file-list"></div>
{#                                     <div id="spinner" class="spinner" hidden></div>#}
                                </div>
                            </div>
                            <div class="uploaded-capsule-content-section"></div>
                            <div class="button-section">
                                {% include 'components/buttons/button.html' with button_text="Submit" button_type="submit" button_class="primary-button"%}
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    <!-- Success message -->
    {% include "components/messages/messages.html" with message_length=5%}

    </div>
{% endblock %}